# ğŸ”— ì°¸ê³ ìë£Œ

---

- chatGPT
- RealMySQL 8.0 - 10.3 ì‹¤í–‰ ê³„íš ë¶„ì„(416p)
- SELECT ì¿¼ë¦¬ ìˆ˜í–‰ ìˆœì„œ, ì˜ì™¸ë¡œ ëª¨ë¥´ëŠ” ì‚¬ëŒ ë§ìŒ â‡’ [**ë§í¬**](https://www.youtube.com/watch?v=eeq0wDl3bLs&ab_channel=SQL%EC%A0%84%EB%AC%B8%EA%B0%80%EC%A0%95%EB%AF%B8%EB%82%98)

# âœê³µë¶€ ë‚´ìš© ì •ë¦¬

---

## â“ë°ì´í„°ë² ì´ìŠ¤ ì‹¤í–‰ ê³„íšì´ë€?

ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì´ ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì„ ê¸°ìˆ í•œ ê³„íšì„œ

## â“ë°ì´í„°ë² ì´ìŠ¤ ì‹¤í–‰ ê³„íšì´ ìˆëŠ” ì´ìœ ëŠ”?

- ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì´ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì˜ ìˆœì„œì™€ ë°©ë²•ì„ ì •ë¦¬í•˜ë©°,
  **ì¿¼ë¦¬ì˜ ì²˜ë¦¬ ì„±ëŠ¥**ì„ ê²°ì •í•˜ëŠ” ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.
    - **ì‹¤í–‰ ê³„íšì„ ë¶„ì„**í•˜ì—¬ ì¿¼ë¦¬ë¥¼ ìµœì í™”í•˜ê±°ë‚˜ ì¸ë±ìŠ¤ë¥¼ ì ì ˆí•˜ê²Œ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ í†µí•´ ì¿¼ë¦¬ì˜ ì²˜ë¦¬ ì†ë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì¿¼ë¦¬ ì²˜ë¦¬ë¥¼ ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ ì—”ì§„ì´ ìˆ˜í–‰í•˜ëŠ” ë‹¤ì–‘í•œ ì‘ì—…, ì˜ˆë¥¼ ë“¤ë©´ ì¸ë±ìŠ¤ ê²€ìƒ‰, ì¡°ì¸ ì—°ì‚°, ì •ë ¬ ê·¸ë£¹í™” ë“±ì„ ê¸°ìˆ í•©ë‹ˆë‹¤.
    - ì´ëŸ¬í•œ ì‘ì—…ë“¤ì€ ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì—ì„œ ìˆ˜í–‰ë  ë•Œ, ìµœì í™”ëœ ë°©ë²•ìœ¼ë¡œ ìˆ˜í–‰ë˜ë„ë¡ ì‹¤í–‰ ê³„íšì— í¬í•¨ë©ë‹ˆë‹¤.
- ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì— ì˜í•´ ìë™ìœ¼ë¡œ ìƒì„±ë˜ë©°, ì¿¼ë¦¬ ì‹¤í–‰ ì „ì— ìƒì„±ëœ ê³„íšì„œë¥¼ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## â“MySQLì—ì„œ ì‹¤í–‰ ê³„íš(Execution Plan)ì„ í™•ì¸í•˜ëŠ” ë°©ë²•ì€?

chatGPTê°€ ì¶”ì²œí•´ì¤€ ìë£Œ â‡’ [**MySQLê³µì‹ë¬¸ì„œ**](https://dev.mysql.com/doc/refman/8.0/en/execution-plan-information.html)

```sql
mysql> EXPLAIN FORMAT=JSON SELECT Name FROM country WHERE Code LIKE 'A%';
```

ìœ„ ì˜ˆì‹œë¥¼ ë³´ë©´ ê²°ë¡ ì ìœ¼ë¡œ EXPLAIN í‚¤ì›Œë“œë¥¼ ë§¨ ì•ì— ì ì–´ì£¼ë©´ ë˜ëŠ”ê±¸ë¡œ ë³´ì¸ë‹¤.

ì‹ ê¸°í•˜ê²Œë„ í¬ë§·ë„ ì ìš© í•  ìˆ˜ ìˆë‹¤. â‡’ [**ì˜ˆì‹œ ë§í¬**](https://dev.mysql.com/doc/refman/8.0/en/explain.html)

ì°¾ì•„ë³´ë‹ˆê¹Œ ì–´ë–¤ RDBMSë¥¼ ì‚¬ìš© í•˜ëŠ”ì§€ì— ë”°ë¼ì„œ ì‹¤í–‰ ê³„íšì„ ë³´ëŠ” ë°©ë²•ì´ ë‹¤ë¥¸ ê²ƒ ê°™ë‹¤.

### **ì§ì ‘ ì‹¤í–‰í•´ë³´ì**

![Untitled](https://file.notion.so/f/s/c8417cfc-1701-48bb-ab77-ae1e182db653/Untitled.png?id=5732ef34-e9da-4604-87bd-ffb38a6c99f5&table=block&spaceId=a6996cfb-7419-48fb-9ad1-d4bdae0c3162&expirationTimestamp=1680594572788&signature=t7dYVRSVgt3KcJ3l8lWejhf3Aw3KbVQ0PykI3pcywBI&downloadName=Untitled.png)

Explain í‚¤ì›Œë“œë¥¼ í†µí•´ ì‰½ê²Œ ì¶œë ¥ëœë‹¤.

### **ì§ì ‘ ì‹¤í–‰í•´ë³´ì2(Json í¬ë§·)**

![Untitled](https://file.notion.so/f/s/ba2d08c3-aa16-407b-8214-a8753d044bb4/Untitled.png?id=e42958f5-bc67-4c69-b255-b53cf399c47d&table=block&spaceId=a6996cfb-7419-48fb-9ad1-d4bdae0c3162&expirationTimestamp=1680594560472&signature=YHVY-qTEIr2iQW2hlP1fsjKh6ir4sTpiUb5zCprXP6g&downloadName=Untitled.png)

Json í¬ë§·ìœ¼ë¡œ ë‚˜ì˜¤ë„ë¡ ì…ë ¥ë„ ê°€ëŠ¥í•˜ë‹¤.

## â“ì‹¤í–‰ ê³„íšì—ëŠ” ì–´ë–¤ ë‚´ìš©ë“¤ì´ ë‹´ê²¨ ìˆë‚˜?

```sql
MariaDB [employees]> explain select * from employees e inner join salaries s on s.emp_no=e.emp_no where first_name='ABC';

+------+-------------+-------+------+---------------+---------+---------+--------------------+--------+-------------+
| id   | select_type | table | type | possible_keys | key     | key_len | ref                | rows   | Extra       |
+------+-------------+-------+------+---------------+---------+---------+--------------------+--------+-------------+
|    1 | SIMPLE      | e     | ALL  | PRIMARY       | NULL    | NULL    | NULL               | 299600 | Using where |
|    1 | SIMPLE      | s     | ref  | PRIMARY       | PRIMARY | 4       | employees.e.emp_no | 1      |             |
+------+-------------+-------+------+---------------+---------+---------+--------------------+--------+-------------+
```

- ì‹¤í–‰ ìˆœì„œëŠ” ìœ„ì—ì„œ ì•„ë˜ë¡œ ìˆœì„œëŒ€ë¡œ í‘œì‹œëœë‹¤.
- ì¶œë ¥ëœ ì‹¤í–‰ ê³„íšì—ì„œ **ìœ„ìª½**ì— ì¶œë ¥ëœ ê²°ê³¼ì¼ìˆ˜ë¡(id ì¹¼ëŸ¼ì˜ ê°’ì´ ì‘ì„ìˆ˜ë¡) ì¿¼ë¦¬ì˜ ë°”ê¹¥(Outer) ë¶€ë¶„ì´ê±°ë‚˜ ë¨¼ì € ì ‘ê·¼í•œ í…Œì´ë¸”ì´ê³ ,
  **ì•„ë˜ìª½**ì— ì¶œë ¥ëœ ê²°ê³¼ì¼ìˆ˜ë¡(id ì¹¼ëŸ¼ì˜ ê°’ì´ í´ìˆ˜ë¡) ì¿¼ë¦¬ì˜ ì•ˆìª½(Inner) ë¶€ë¶„ ë˜ëŠ” ë‚˜ì¤‘ì— ì ‘ê·¼í•œ í…Œì´ë¸”ì— í•´ë‹¹í•œë‹¤.

### idì¹¼ëŸ¼

### select_type ì¹¼ëŸ¼

- SIMPLE
- PRIMARY
- UNION
- DEPENDENT UNION
- UNION RESULT
- SUBQUERY
- DEPENDENT SUBQUERY
- DERIVED
- DEPENDENT DERVED
- UNCACHEABLE SUBQUERY
- UNCACHEABLE UNION
- MATERIALIZED

### table ì¹¼ëŸ¼

### partitions ì¹¼ëŸ¼

### type ì¹¼ëŸ¼

- system
- const
- eq_ref
- ref
- fulltext
- ref_or_null
- unique_subquery
- index_subquery
- range
- index_merge
- index
- ALL

### possible_keys ì¹¼ëŸ¼

### key ì¹¼ëŸ¼

### key_len ì¹¼ëŸ¼

### ref ì¹¼ëŸ¼

### rows ì¹¼ëŸ¼

### filtered ì¹¼ëŸ¼

### Extra ì¹¼ëŸ¼

- const row not found
- Deleting all rows
- Distinct
- FirstMatch
- Full scan on NULL key
- Impossible HAVING
- Impossible WHERE
- LooseScan
- No matching min/max row
- no matching row in const table
- No matching rows after partition pruning
- No tables used
- Not exists
- Plan isnâ€™t ready yet
- Range checked for each record(index map:N)
- Recursive
- Rematerialize
- Select tables optimized away
- Start temporary, End temporary
- unique row not found
- Using filesort
- Using index(ì»¤ë²„ë§ ì¸ë±ìŠ¤)
- Using index condition

Extra ì¹¼ëŸ¼ì€ ë„ˆë¬´ ë§ë‹¤.

## ê¶ê¸ˆí•œ ì 

- select ì¿¼ë¦¬ ì‹¤í–‰ ìˆœì„œëŠ” ì–´ë–»ê²Œ ë ê¹Œ? â‡’ [**ë‚´ìš© ì •ë¦¬ ë§í¬**](https://github.com/yarogono/Daily-Book-Club/blob/main/yarogono/F-lab/Java/12%EC%A3%BC%20%EC%B0%A8/Select%20%EC%BF%BC%EB%A6%AC%20%EC%88%9C%EC%84%9C.md)