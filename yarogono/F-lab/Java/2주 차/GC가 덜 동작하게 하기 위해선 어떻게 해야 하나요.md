# ğŸ”— ì°¸ê³ ìë£Œ

---

- Naver D2 - Garbage Collection íŠœë‹ â‡’ [**ë§í¬**](https://d2.naver.com/helloworld/37111)
- ì±… <ìë°” ì„±ëŠ¥ íŠœë‹ ì´ì•¼ê¸°> - story03 ì™œ ìê¾¸ Stringì„ ì“°ì§€ ë§ë¼ëŠ” ê±°ì•¼?
- ì±… <ìë°” ì„±ëŠ¥ íŠœë‹ ì´ì•¼ê¸°> - story19 GC íŠœë‹ì„ í•­ìƒ í•  í•„ìš”ëŠ” ì—†ë‹¤
- ì±… <ì´í™í‹°ë¸Œ ìë°”> - ì•„ì´í…œ6 ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±ì„ í”¼í•˜ë¼
- Understanding Memory Leaks in Java â‡’ [**ë§í¬**](https://www.baeldung.com/java-memory-leaks)
- ì˜¤í†  ë°•ì‹± & ì˜¤í†  ì–¸ë°•ì‹± â‡’ [**ë§í¬**](https://gyoogle.dev/blog/computer-language/Java/Auto%20Boxing%20&%20Unboxing.html)

# âœê³µë¶€ ë‚´ìš© ì •ë¦¬

---

## 1. String ëŒ€ì‹  StringBuilderë‚˜ StringBuffer ì‚¬ìš©í•˜ê¸°

String ì‚¬ìš©ì„ ë‚¨ë°œí•˜ë©´ì„œ String + String ì„ í•˜ëŠ” ê²ƒìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ìƒê¸°ëŠ” ë¬¸ì œì´ë‹¤.

```java
String resultStr = new String();
resultStr += "String test";
```

- resultStr String ë³€ìˆ˜ì˜ ë©”ëª¨ë¦¬ê°€ ì•„ë‹ˆë¼ ìƒˆë¡œìš´ ê°ì²´ì™€ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê²Œ ëœë‹¤.
- ë§Œì•½ì— ë¬¸ìì—´ê³¼ ë¬¸ìì—´ì„ ë”í•˜ëŠ” ì—°ì‚°ì„ ë°˜ë³µí•´ì„œ í•œë‹¤ê³  í•˜ë©´,
  ë°˜ë³µë¬¸ íšŸìˆ˜ ë§Œí¼ ê°ì²´ê°€ ìƒì„±ë˜ëŠ” ê²ƒì´ë‹¤.
  â‡’ ì´ì „ì— ìˆë˜ ê°ì²´ëŠ” í•„ìš” ì—†ëŠ” ì“°ë ˆê¸° ê°’ì´ ë˜ì–´ GC ëŒ€ìƒì´ ë˜ì–´ ë²„ë¦°ë‹¤.

- ì§ì ‘ ì½”ë“œ ì‘ì„±í•´ì„œ ì„±ëŠ¥ ë¹„êµí•´ë³´ê¸°

    ```java
    @State(Scope.Thread)
    @BenchmarkMode(Mode.AverageTime)
    @OutputTimeUnit(TimeUnit.NANOSECONDS)
    public class TestClass {
    
        String aValue = "abcde";
    
        @Benchmark
        @OperationsPerInvocation(10000)
        public String strTest() {
            String a = new String();
            for (int loop = 0; loop < 10000; loop++) {
                a += aValue;
            }
    
            return a;
        }
    
        @Benchmark
        @OperationsPerInvocation(10000)
        public String stringBuilderTest() {
            StringBuilder stringBuilder = new StringBuilder();
            for (int loop = 0; loop < 10000; loop++) {
                stringBuilder.append(aValue);
            }
    
            return stringBuilder.toString();
        }
    
        @Benchmark
        @OperationsPerInvocation(10000)
        public String stringBufferTest() {
            StringBuffer stringBuffer = new StringBuffer();
    
            for (int loop = 0; loop < 10000; loop++) {
                stringBuffer.append(aValue);
            }
            String temp2 = stringBuffer.toString();
    
            return stringBuffer.toString();
        }
    
        public static void main(String[] args) throws RunnerException {
            Options opt = new OptionsBuilder()
                    .include(TestClass.class.getSimpleName())
                    .forks(1)
                    .build();
    
            new Runner(opt).run();
        }
    }
    ```

  <ìë°” ì„±ëŠ¥ íŠœë‹ ì´ì•¼ê¸°> ì±…ì— ë‚˜ì˜¤ëŠ” JMHë¥¼ ì‚¬ìš©í•´, ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ì§ì ‘ ì§„í–‰í•´ ë´¤ìŠµë‹ˆë‹¤.

  ì½”ë“œëŠ” ì±…ì˜ ì˜ˆì œì™€ JMHì˜ ìƒ˜í”Œ ì½”ë“œë¥¼ ì°¸ê³ í•´ì„œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

  ì‹¤í–‰ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

  ![ì„±ëŠ¥í…ŒìŠ¤íŠ¸.JPG](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0c6f82b2-acd8-4ea8-8d38-e63d1683d0ca/%EC%84%B1%EB%8A%A5%ED%85%8C%EC%8A%A4%ED%8A%B8.jpg)

    - TestClass.strTest â‡’ ë¬¸ìì—´ ë³€ìˆ˜ì— â€œabcdâ€ ë¬¸ìì—´ì„ ë”í•˜ëŠ” ì—°ì‚° í…ŒìŠ¤íŠ¸
    - TestClass.stringBufferTest â‡’ StringBufferì— â€œabcdâ€ ë¬¸ìì—´ì„ append í•˜ëŠ” í…ŒìŠ¤íŠ¸
    - TestClass.stringBuilderTest â‡’ StrinbBuilderì— â€œabcdâ€ ë¬¸ìì—´ì„ append í•˜ëŠ” í…ŒìŠ¤íŠ¸

  StringBuilderë¥¼ ì‚¬ìš© í•œ ê²ƒì´ ë¬¸ìì—´ì„ ê°ê° ë”í•œ ê²ƒë³´ë‹¤ ì•½ 300ë°° ë„˜ëŠ” ì„±ëŠ¥ ì°¨ì´ë¥¼ ë³´ì˜€ë‹¤.


## 2. ì˜¤í† ë°•ì‹±

- ì˜¤í† ë°•ì‹±ì€ í”„ë¡œê·¸ë˜ë¨¸ê°€ ê¸°ë³¸ íƒ€ì…ê³¼ ë°•ì‹±ëœ ê¸°ë³¸ íƒ€ì…ì„ ì„ì–´ ì“¸ ë•Œ
  ìë™ìœ¼ë¡œ ìƒí˜¸ ë³€í™˜í•´ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤.
- ì˜¤í† ë°•ì‹±ì€ ê¸°ë³¸ íƒ€ì…ê³¼ ê·¸ì— ëŒ€ì‘í•˜ëŠ” ë°•ì‹±ëœ ê¸°ë³¸ íƒ€ì…ì˜ êµ¬ë¶„ì„ íë ¤ì£¼ì§€ë§Œ,
  ì™„ì „íˆ ì—†ì• ì£¼ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

```java
private static long sum() {
	Long sum = 0L;
	for (long i = 0; i <= Integer.MAX_VALUE; i++) {
		sum += i;
	}
	return sum;
}
```

- sum ë³€ìˆ˜ë¥¼ longì´ ì•„ë‹Œ Longìœ¼ë¡œ ì„ ì–¸í•´ì„œ ë¶ˆí•„ìš”í•œ Long ì¸ìŠ¤í„´ìŠ¤ê°€ ì•½ 231ê°œë‚˜ ë§Œë“¤ì–´ì§„ ê²ƒì´ë‹¤.
- ë°•ì‹±ëœ ê¸°ë³¸ íƒ€ì…ë³´ë‹¤ëŠ” ê¸°ë³¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ê³ , ì˜ë„ì¹˜ ì•Šì€ ì˜¤í† ë°•ì‹±ì´ ìˆ¨ì–´ë“¤ì§€ ì•Šë„ë¡ ì£¼ì˜

- **ì´ë¡ ì€ ë´¤ìœ¼ë‹ˆ ì§ì ‘ ì½”ë“œ ì‘ì„±í•´ì„œ ì„±ëŠ¥ ë¹„êµí•´ë³´ê¸°**

  ### ì˜¤í† ë°•ì‹± ì—°ì‚°

    ```java
    public static void main(String[] args) {
    	long start = System.nanoTime();
    	Long sum = 0L;
    	for (long i = 0; i < 1000000; i++) {
    	  sum += i;
    	}
    	System.out.println("ì‹¤í–‰ ì‹œê°„ : " + (System.nanoTime() - start));
    }
    ```

  ![Long.JPG](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/beddb66e-2b39-4e4b-b640-e6c7d60002be/Long.jpg)

  ì•½ 14ms ì •ë„ì˜ ì‹œê°„ì´ ê±¸ë ¸ë‹¤.

  ### ë™ì¼ íƒ€ì… ì—°ì‚°

    ```java
    public static void main(String[] args) {
    	long start = System.nanoTime();
    	long sum = 0;
    	  for (long i = 0; i < 1000000; i++) {
    	  sum += i;
    	}
    	System.out.println("ì‹¤í–‰ ì‹œê°„ : " + (System.nanoTime() - start));
    }
    ```

  ![longNum.JPG](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c6952a85-c3a2-4718-931f-a217f023485c/longNum.jpg)

  ì•½ 2ms ì •ë„ì˜ ì‹œê°„ì´ ê±¸ë ¸ë‹¤.

    - ë¬¸ì í•˜ë‚˜ ì°¨ì´ë¡œ ì„±ëŠ¥ì˜ ì°¨ì´ê°€ ëˆˆì— í™• ë³´ì´ê²Œ ëœë‹¤.
    - ì•„ë¬´ë¦¬ CPUì˜ ì„±ëŠ¥ì´ ì¢‹ì•„ì¡Œë‹¤ê³  í•´ë„ ì‘ì€ ê²ƒë¶€í„° ì„±ëŠ¥ ìµœì í™”ì— ì‹ ê²½ ì“°ì.
        - ìœ„ì™€ ê°™ì€ ì„±ëŠ¥ ì´ìŠˆê°€ ìˆëŠ” ì½”ë“œê°€ ì ìœ¼ë©´ ëª¨ë¥´ê² ì§€ë§Œ,
          ì½”ë“œê°€ ìŒ“ì´ê³  ìŒ“ì¼ìˆ˜ë¡ ì„±ëŠ¥ì—ëŠ” ì•…ì˜í–¥ì„ ì¤„ ê²ƒì´ë‹¤.


### 3. GC íŠœë‹ì„ í•˜ë©´ ëœ ì‘ë™í•˜ì§€ ì•Šì„ê¹Œ?

- â€˜[**GCê°€ ëŒë©´ ì–´ë–¤ ì¼ì´ ë²Œì–´ì§€ë‚˜ìš”?**](https://www.notion.so/GC-445ed53b3a254486b7490f0bcf9240e0)â€™ ì—ë„ ì‘ì„±í–ˆì§€ë§Œ ì„±ëŠ¥ ìµœì í™”ëŠ” ì•„ì§ GCì— ëŒ€í•œ ì´í•´ê°€ ë¶€ì¡±í•´ì„œ ê³ ë ¤í•˜ì§€ëŠ” ì•Šì•˜ìŠµë‹ˆë‹¤.
- GC íŠœë‹ì— ëŒ€í•œ ê¸€ì„ ì½ì–´ë³´ë©´ì„œ ëŠë‚€ ì ì„ ì ì–´ë´¤ìŠµë‹ˆë‹¤.
    - Aë¼ëŠ” ì„œë¹„ìŠ¤ì—ì„œ GCì˜µì…˜ì„ ì˜ ì ìš©í•´ì„œ ì˜ ì‘ë™í•œë‹¤ê³  í•´ë„,
      ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì—ì„œë„ í›Œë¥­í•˜ê²Œ ì ìš©ë˜ì–´ ìµœì í™”ì˜ íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•˜ì§€ ë§ì.
      â‡’ ê° ì„œë¹„ìŠ¤ë§ˆë‹¤ í™˜ê²½ì´ ë‹¤ë¥´ë‹¤. ê·¸ë˜ì„œ í•´ë‹¹ ì„œë¹„ìŠ¤ì— ë§ê²Œ GC íŠœë‹ì„ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§ í•˜ë©´ì„œ ì§„í–‰í•´ì•¼ í•œë‹¤.
    - ê¸°ë³¸ì ì¸ ë©”ëª¨ë¦¬ í¬ê¸° ì •ë„ë§Œ ì§€ì •í•˜ë©´ ì›¬ë§Œí¼ ì‚¬ìš©ëŸ‰ì´ ë§ì§€ ì•Šì€ ì‹œìŠ¤í…œì—ì„œëŠ” íŠœë‹ì„ í•  í•„ìš”ê°€ ì—†ë‹¤.


ê²°ë¡ ì ì€ ì •ë‹µì²˜ëŸ¼ ìµœì í™”ëœ GC íŠœë‹ì€ ì˜µì…˜ì€ ì—†ë‹¤.

GC íŠœë‹ ì˜µì…˜ì€ í•´ë‹¹ í™˜ê²½ì— ë§ê²Œ ì§„í–‰ í•˜ë©´ì„œ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§ í•˜ëŠ” ê²ƒì´ë‹¤.

- â“ ê·¸ë ‡ë‹¤ë©´ ë‚´ê°€ ì§€ê¸ˆ ì•Œì•„ì•¼ í•  ê²ƒì€?
    - GCíŠœë‹ ì˜µì…˜ê³¼ ì˜µì…˜ ë³€ê²½ ë°©ë²•
        - ì£¼ì˜í•´ì•¼ í•  ì˜µì…˜
    - GC ëª¨ë‹ˆí„°ë§ í•˜ëŠ” ë°©ë²•
        - ëª¨ë‹ˆí„°ë§ íˆ´ ì§ì ‘ ì„¤ì¹˜í•˜ê³  ì‚¬ìš©í•´ë³´ê¸°

# ê³µë¶€í•˜ë©´ì„œ ëŠë‚€ ì 

---

- Stringê³¼ Stringì„ ë”í•˜ëŠ” ì—°ì‚°ì€ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ì˜ ì›ì¸ì´ë¼ëŠ” ì–˜ê¸°ëŠ” ë“¤ì—ˆì—ˆë‹¤.
  í•˜ì§€ë§Œ ì§ì ‘ ê³µë¶€í•´ë³´ê³  StringBuilderë³´ë‹¤ ìˆ˜ì‹­ë°° ì°¨ì´ê°€ ë‚œë‹¤ëŠ” ê²ƒì€ ì¶©ê²©ì ì´ì—ˆë‹¤.
- ì˜ˆì „ì—ëŠ” ì„±ëŠ¥ì´ë‚˜ ì—¬ëŸ¬ ì˜ˆì œê°€ ë‚˜ì˜¤ë©´ ê·¸ëƒ¥ ì½ê³  ë„˜ì–´ê°„ ì ì´ ë§ì•˜ë‹¤.
  ì´ë²ˆì—ëŠ” ì§ì ‘ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ë©´ì„œ ì„±ëŠ¥ ì²´í¬ë¥¼ í•´ë³´ë‹ˆ ê¸°ì–µì— ë” ì˜ ë‚¨ê³  ì™€ ë‹¿ì•˜ë‹¤.
- ì±…ì„ ì½ì„ ë•Œ ì• ë¶€ë¶„ë¶€í„° ë‚´ìš©ì„ ì •ë¦¬í•˜ë©´ì„œ ì½ì—ˆì—ˆë‹¤.
  ì´ë²ˆì— â€˜ìë°” ì„±ëŠ¥ íŠœë‹ ì´ì•¼ê¸°â€™ ëŠ” ê¶ê¸ˆí•œ ë‚´ìš©ê³¼ ì—°ê²°ë˜ëŠ” ë‚´ìš©ì„ ì°¾ì•„ì„œ ì½ê³  ë‚´ìš©ì„ ì •ë¦¬í–ˆë‹¤.
    - ì±…ì„ ì²˜ìŒë¶€í„° ëê¹Œì§€ ì½ëŠ” ê²ƒë„ ì¢‹ì§€ë§Œ, ê¸°ì–µì— ë‚¨ì§€ ì•Šì•˜ë‹¤.
      ì‹œê°„ ëŒ€ë¹„ íš¨ìœ¨ì´ ë„ˆë¬´ ì ì—ˆë‹¤.
      ì „ë¶€ ë‹¤ ì½ê¸°ê°€ ì¢‹ê¸°ëŠ” í•˜ê² ì§€ë§Œ, í•„ìš”í•œ ë¶€ë¶„ì„ ì½ê³  ìš”ì•½í•˜ëŠ” ë°©ì‹ì´ ì§€ê¸ˆì€ ë§ëŠ” ê²ƒ ê°™ë‹¤.